{% extends "base.html" %}
{% load static %}

{% block title %}Matches{% endblock title %}

{% block body %}
<div class="container my-5">
  <h2 class="mb-4 text-center">Matched Projects for You</h2>

  {% if matched_projects %}
    <div class="d-flex flex-column gap-4">
      {% for project in matched_projects %}
        <div class="card shadow-sm">
          <div class="card-body d-flex flex-column flex-md-row justify-content-between align-items-start">
            
            <!-- Left side: Project Info -->
            <div class="me-4" style="flex: 1;">
              <h5 class="card-title">{{ project.profile.company_name }}</h5>
              <p><strong>Description:</strong><br>{{ project.project_description }}</p>
              <p><strong>Terms:</strong><br>{{ project.terms_of_contract }}</p>
              <p><strong>Required Skills:</strong>
                {% for skill in project.required_skills.all %}
                  <span class="badge bg-secondary me-1">{{ skill.name }}</span>
                {% empty %}
                  <span class="text-muted">None</span>
                {% endfor %}
              </p>
            </div>

            <!-- Right side: Action Button -->
            <div class="d-flex align-items-start justify-content-end mt-3 mt-md-0" style="min-width: 180px;">
              {% if project.match_status == "pending" %}
                <button class="btn btn-warning w-100" disabled>Request Sent</button>
              {% elif project.match_status == "accepted" %}
                <button class="btn btn-success w-100" disabled>Accepted</button>
              {% elif project.match_status == "rejected" %}
                <button class="btn btn-danger w-100" disabled>Rejected</button>
              {% else %}
                <form method="POST" action="{% url 'send_match_request' project.id %}" class="w-100">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-primary w-100">Send Request</button>
                </form>
              {% endif %}
            </div>

          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-muted">No project matches found based on your current skills.</p>
  {% endif %}
</div>
{% endblock body %}
